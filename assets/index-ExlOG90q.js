(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();const n={pokemonList:[],filteredPokemons:[],allPokemon:[],currentOffset:0,limit:20,selectedFilters:{color:[],gender:"",types:[]},availableFilters:{color:[],gender:[],types:[]},searchTerm:"",totalPokemon:0},m="https://pokeapi.co/api/v2",v=async()=>{const e=`${m}/pokedex/national`,t=await fetch(e);if(!t.ok)return Promise.reject({error:`Something went wrong while retrieving Pokemons at ${e}`});const o=await t.json();return n.allPokemon=o.pokemon_entries,n.totalPokemon=o.pokemon_entries.length,o},f=async({pokemonList:e,offset:t,limit:o})=>{if(!e||t===null||o===null){console.error("You need to provide proper entry data in order to fetch.");return}const r=e.slice(t,t+o);return n.currentOffset=t+o,await Promise.all(r.map(async s=>{const l=await(await fetch(`${m}/pokemon/${s.entry_number}`)).json(),a={name:s.pokemon_species.name,url:`${m}/pokemon/${s.entry_number}`,id:s.entry_number,types:l.types.map(c=>c.type.name)};return n.pokemonList=[...n.pokemonList,a].sort((c,k)=>c.id-k.id),a})).catch(s=>console.error(s))},P=async()=>{const[e,t,o]=await Promise.all([fetch(`${m}/pokemon-color`).then(r=>r.json()),fetch(`${m}/gender`).then(r=>r.json()),fetch(`${m}/type`).then(r=>r.json())]);return n.availableFilters.color=[...e.results],n.availableFilters.gender=[...t.results],n.availableFilters.types=[...o.results],{colors:e.results,genders:t.results,types:o.results}},E=e=>{if(!e){console.error("Invalid event error");return}if(e.target.classList.contains("color-box")){const t=`
      <svg style="pointer-events: none" height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.837 17.837" xml:space="preserve"><path style="fill:#fff" d="M16.145 2.571a.7.7 0 0 0-.99 0L6.92 10.804l-4.241-4.27a.698.698 0 0 0-.989 0L.204 8.019a.703.703 0 0 0 0 .99l6.217 6.258a.704.704 0 0 0 .99 0L17.63 5.047a.7.7 0 0 0 0-.994l-1.485-1.482z"/></svg>
    `;e.target.classList.contains("selected")?(e.target.classList.remove("selected"),e.target.innerHTML="",n.selectedFilters.color=n.selectedFilters.color.filter(o=>o!==e.target.dataset.color)):(e.target.classList.add("selected"),e.target.innerHTML=t,n.selectedFilters.color=Array.from(new Set([...n.selectedFilters.color,e.target.dataset.color])))}},I=e=>{if(!e||e.length===0){console.error("Invalid colors error");return}const t=document.getElementById("color-filter");if(!t){console.error("Invalid colorFilter error");return}t.innerHTML=e.map(o=>`
    <div class="color-box ${o.name}" data-color="${o.name}" style="background-color: ${o.name}" tabindex="0"></div>
  `).join("")},_=e=>{if(!e||e.length===0){console.error("Invalid genders error");return}const t=document.getElementById("gender-filter");if(!t){console.error("Invalid genderFilter error");return}t.innerHTML=`
    ${e.map(o=>`
      <label  tabindex="0"><input type="radio" name="gender" value="${o.name}" tabindex="0"> ${o.name}</label>
    `).join("")}
  `},w=e=>{if(!e){console.error("Invalid types error");return}const t=document.getElementById("type-filter");if(!t){console.error("Invalid typeFilter error");return}t.innerHTML=e.map(o=>`
    <label><input type="checkbox" name="type" value="${o.name}"> ${o.name}</label>
  `).join("")},F=e=>{if(!e){console.error("Invalid filters error");return}I(e.colors),_(e.genders),w(e.types)},$=async e=>await(await fetch(`${m}/pokemon/${e}`)).json(),g=e=>{if(!e){console.error("Invalid event error");return}e.key==="Escape"&&h()},h=()=>{document.getElementById("modal").style.display="none",document.removeEventListener("keydown",g)},b=e=>{if(!e){console.error("Invalid pokemon provided");return}const t=document.getElementById("pokemon-details");t.innerHTML=`
    <h2>${e.name} #${e.id.toString().padStart(4,"0")}</h2>
    <img width="475" height="475" src="${e.sprites.other["official-artwork"].front_default}" alt="${e.name}" class="pokemon-image">
    <div>
      <p>Height: ${e.height/10}m</p>
      <p>Weight: ${e.weight/10}kg</p>
      <p>Types: ${e.types.map(o=>o.type.name).join(", ")}</p>
      <p>Abilities: ${e.abilities.map(o=>o.ability.name).join(", ")}</p>
    </div>
  `},L=async e=>{if(!e||!(e instanceof Element)){console.error("Invalid node error");return}if(e.classList.contains("pokemon__img")){const t=e.dataset.id,o=await $(t),r=document.getElementById("modal");b(o),r.style.display="block",r.querySelector(".close").addEventListener("click",h),document.addEventListener("keydown",g)}},B=()=>{const e=document.querySelectorAll(".pokemon");if(!e){console.error("Invalid pokemonNodes error");return}e.forEach(t=>t.addEventListener("keydown",function(o){if(o.key==="Enter"||o.keyCode===13||o.key===" "||o.keyCode===32){o.preventDefault();const r=o.target.getElementsByClassName("pokemon__img")[0];r&&L(r)}}))},T=()=>{const e=document.getElementsByClassName("pokemon-count")[0];if(!e){console.error("Invalid pokemonCounter error");return}e.innerHTML=`
    <span class="pokemon-count__pokemon__number">${n.pokemonList.length}</span> Pokémon displayed
  `},N=e=>{if(!e){console.error("Invalid pokemon error");return}if(e.types.length===1)return`--typeColor:var(--type-${e.types[0]}); --secondary-typeColor:var(--type-${e.types[0]});`;if(e.types.length>1)return`--typeColor:var(--type-${e.types[0]}); --secondary-typeColor:var(--type-${e.types[1]});`},S=e=>{if(!e){console.error(`No pokemon information was provided for ${e}`);return}return`
    <div class="pokemon" style="${N(e)}" tabindex="0">
      <div class="pokemon__img-container">
          <img class="pokemon__img" data-id="${e.id}" src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${e.id}.png" alt="Image for pokemon ${e.name}">
      </div>
      <div class="pokemon__info">
          <span class="pokemon__info__number">#${e.id.toString().padStart(4,"0")}</span>
          <h3 class="pokemon__info__name">${e.name}</h3>
          <small class="pokemon__info__type">Type: <span>${e.types.join(", ")}</span></small>
      </div>
    </div>
  `},M=({pokemonList:e,node:t})=>{if(!t||!(t instanceof Element)){console.error("Node was not provided or is invalid.");return}if(!e||e.length===0){t.classList.add("no-results"),t.innerHTML='<p class="no-results__text">No Pokémon found. Try different filters, search terms or reset filters.</p>';return}t.classList.remove("no-results"),t.innerHTML=e.map(o=>S(o)).join("")},y=()=>{const e=document.getElementById("pokemon-list");if(!e){console.error("Invalid pokemonListNode error");return}M({pokemonList:n.pokemonList,node:e}),T(),B()},C=async()=>{if(!document.getElementById("pokemon-list")){console.error("Invalid node error");return}n.selectedFilters={color:[],gender:"",types:[]},n.searchTerm="",n.currentOffset=0,n.pokemonList=[],document.getElementById("search-input").value="",document.querySelectorAll(".color-box").forEach(o=>{o.classList.remove("selected"),o.innerHTML=""}),document.querySelectorAll('input[name="gender"]').forEach(o=>o.checked=!1),document.querySelectorAll('input[name="type"]').forEach(o=>o.checked=!1);const t=await f({pokemonList:n.allPokemon,offset:0,limit:20});n.pokemonList=[...t],y()};function A(e,t){let o;return function(...r){const s=this;clearTimeout(o),o=setTimeout(()=>e.apply(s,r),t)}}const O=async e=>{var r,s,i;if(!e){console.error("There is no filter data provided.");return}const t=[];(r=e.colorsFilterData)==null||r.forEach(l=>t.push(fetch(l.url).then(a=>a.json()))),e.genderFilterData&&t.push(fetch((s=e.genderFilterData)==null?void 0:s.url).then(l=>l.json())),(i=e.typesFilterData)==null||i.forEach(l=>t.push(fetch(l.url).then(a=>a.json()))),(await Promise.all(t)).forEach(l=>{var a,c,k;(a=l.pokemon_species)!=null&&a.length&&l.pokemon_species.forEach(p=>{const d=n.allPokemon.find(u=>u.pokemon_species.name===p.name);d&&(n.filteredPokemons=Array.from(new Set([...n.filteredPokemons,d])))}),(c=l.pokemon_species_details)!=null&&c.length&&l.pokemon_species_details.forEach(p=>{const d=n.allPokemon.find(u=>u.pokemon_species.name===p.pokemon_species.name);d&&(n.filteredPokemons=Array.from(new Set([...n.filteredPokemons,d])))}),(k=l.pokemon)!=null&&k.length&&l.pokemon.forEach(p=>{const d=n.allPokemon.find(u=>u.pokemon_species.name===p.pokemon.name);d&&(n.filteredPokemons=Array.from(new Set([...n.filteredPokemons,d])))})})},j=()=>{const e=n.availableFilters.color.filter(r=>n.selectedFilters.color.includes(r.name)),t=n.availableFilters.gender.find(r=>r.name===n.selectedFilters.gender),o=n.availableFilters.types.filter(r=>n.selectedFilters.types.includes(r.name));return{colorsFilterData:e,genderFilterData:t,typesFilterData:o}},x=async()=>{var o,r;const e=document.getElementById("pokemon-list"),t=document.getElementById("loading");if(!e||!t){console.error("Invalid node error");return}e.innerHTML="",n.selectedFilters.gender=(o=document.querySelector('input[name="gender"]:checked'))==null?void 0:o.value,n.selectedFilters.types=(r=Array.from(document.querySelectorAll('input[name="type"]:checked')))==null?void 0:r.map(s=>s.value),n.currentOffset=0,n.pokemonList=[],n.filteredPokemons=[],t.style.display="flex",await O(j()),await f({pokemonList:n.filteredPokemons,offset:0,limit:1e3}),t.style.display="none",y()},H=async e=>{if(!e){console.error("Invalid event error");return}const t=e.target;await L(t)},D=e=>{e||console.error("No search was provided");let t=[];return isNaN(e)?t=[...n.allPokemon.filter(o=>o.pokemon_species.name.toLowerCase().includes(e))]:t=[...n.allPokemon.filter(o=>o.entry_number===parseInt(e,10))],t},q=async e=>{if(!e){console.error("No criteria was provided");return}const t=document.getElementById("pokemon-list");if(!t){console.error("Invalid pokemonListNode error");return}t.innerHTML="";const o=e==null?void 0:e.target.value.trim().toString().toLowerCase();if(!o){console.error("Invalid searchTerm error");return}const r=D(o);if(!r){console.error("Invalid pokemonsToSearch error");return}n.currentOffset=0,n.pokemonList=[],n.filteredPokemons=[],n.searchTerm=o,n.filteredPokemons=r,await f({pokemonList:n.filteredPokemons,offset:0,limit:1e3}),y()},R=()=>{const e=document.getElementById("filters"),t=document.getElementById("close-filters");if(!e||!t){console.error("Invalid node error");return}e.style.display="flex",t.addEventListener("click",()=>{e.style.display="none"})},U=async()=>{const e=document.getElementById("load-more");if(n.currentOffset>=n.totalPokemon){e.style.display="none";return}await f({pokemonList:n.allPokemon,offset:n.currentOffset,limit:n.limit}),n.currentOffset=n.pokemonList.length,n.currentOffset>=n.totalPokemon?e.style.display="none":e.style.display="block"},K=async()=>{await U(),y()};(async()=>{await v().then(c=>c.pokemon_entries),await f({pokemonList:n.allPokemon,offset:0,limit:20});const e=await P();F(e);const t=document.getElementById("load-more"),o=document.getElementById("apply-filters"),r=document.getElementById("pokemon-list"),s=document.getElementById("search-input"),i=document.getElementById("color-filter"),l=document.getElementById("reset-filters"),a=document.getElementById("menu-trigger");l.addEventListener("click",C),t.addEventListener("click",K),o.addEventListener("click",x),r.addEventListener("click",H),s.addEventListener("input",A(q,500)),i.addEventListener("click",E),a.addEventListener("click",R),y()})();
